(()=>{var t={765:t=>{var e,n;function r(){}function o(t){return t()}function s(){return Object.create(null)}function i(t){t.forEach(o)}function l(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(t,e,n){t.$$.on_destroy.push(function(t,...e){if(null==t)return r;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}(e,n))}function a(t,e,n){return t.set(n),e}function f(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode.removeChild(t)}function g(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function p(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function x(t){return document.createTextNode(t)}function $(){return x(" ")}function v(){return x("")}function w(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function y(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t){return""===t?null:+t}function q(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function _(t,e){t.value=null==e?"":e}function k(t,e,n){t.classList[n?"add":"remove"](e)}let C;function j(t){C=t}function D(){if(!C)throw new Error("Function called outside component initialization");return C}function E(){const t=D();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const o=function(t,e,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,!1,e),r}(e,n);r.slice().forEach((e=>{e.call(t,o)}))}}}function A(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}(e=self.document)&&!e.getElementById("livereloadscript")&&((n=e.createElement("script")).async=1,n.src="//"+(self.location.host||"localhost").split(":")[0]+":35729/livereload.js?snipver=1",n.id="livereloadscript",e.getElementsByTagName("head")[0].appendChild(n));const z=[],B=[],S=[],P=[],R=Promise.resolve();let T=!1;function O(){T||(T=!0,R.then(L))}function W(t){S.push(t)}const N=new Set;let M=0;function L(){const t=C;do{for(;M<z.length;){const t=z[M];M++,j(t),H(t.$$)}for(j(null),z.length=0,M=0;B.length;)B.pop()();for(let t=0;t<S.length;t+=1){const e=S[t];N.has(e)||(N.add(e),e())}S.length=0}while(z.length);for(;P.length;)P.pop()();T=!1,N.clear(),j(t)}function H(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(W)}}const U=new Set;let I;function K(){I={r:0,c:[],p:I}}function F(){I.r||i(I.c),I=I.p}function J(t,e){t&&t.i&&(U.delete(t),t.i(e))}function G(t,e,n,r){if(t&&t.o){if(U.has(t))return;U.add(t),I.c.push((()=>{U.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function X(t){t&&t.c()}function Q(t,e,n,r){const{fragment:s,on_mount:c,on_destroy:u,after_update:a}=t.$$;s&&s.m(e,n),r||W((()=>{const e=c.map(o).filter(l);u?u.push(...e):i(e),t.$$.on_mount=[]})),a.forEach(W)}function V(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Y(t,e,n,o,l,c,u,a=[-1]){const f=C;j(t);const d=t.$$={fragment:null,ctx:null,props:c,update:r,not_equal:l,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:s(),dirty:a,skip_bound:!1,root:e.target||f.$$.root};u&&u(d.root);let g=!1;if(d.ctx=n?n(t,e.props||{},((e,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&l(d.ctx[e],d.ctx[e]=o)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](o),g&&function(t,e){-1===t.$$.dirty[0]&&(z.push(t),O(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n})):[],d.update(),g=!0,i(d.before_update),d.fragment=!!o&&o(d.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);d.fragment&&d.fragment.l(t),t.forEach(h)}else d.fragment&&d.fragment.c();e.intro&&J(t.$$.fragment),Q(t,e.target,e.anchor,e.customElement),L()}j(f)}class Z{$destroy(){V(this,1),this.$destroy=r}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function tt(t){let e,n,o,s,l,c,u,a,g,p,x,v,b,q,_;return{c(){e=m("main"),n=m("nav"),o=m("div"),s=m("input"),l=$(),c=m("span"),u=$(),a=m("span"),g=$(),p=m("span"),x=$(),v=m("ul"),b=m("a"),b.innerHTML='<li class="svelte-1c7c9b2">Reset</li>',y(s,"type","checkbox"),y(s,"class","svelte-1c7c9b2"),y(c,"class","jxword-hamberder svelte-1c7c9b2"),y(a,"class","jxword-hamberder svelte-1c7c9b2"),y(p,"class","jxword-hamberder svelte-1c7c9b2"),y(b,"href","#"),y(b,"class","jxword-button svelte-1c7c9b2"),y(v,"class","jxword-menu svelte-1c7c9b2"),y(o,"class","jxword-menu-toggle svelte-1c7c9b2"),y(n,"class","jxword-controls")},m(r,i){d(r,e,i),f(e,n),f(n,o),f(o,s),s.checked=t[0],f(o,l),f(o,c),f(o,u),f(o,a),f(o,g),f(o,p),f(o,x),f(o,v),f(v,b),q||(_=[w(s,"change",t[2]),w(b,"click",t[1])],q=!0)},p(t,[e]){1&e&&(s.checked=t[0])},i:r,o:r,d(t){t&&h(e),q=!1,i(_)}}}function et(t,e,n){const r=E();let o=!1;return[o,function(t){t.preventDefault(),r("reset"),n(0,o=!1)},function(){o=this.checked,n(0,o)}]}class nt extends Z{constructor(t){super(),Y(this,t,et,tt,c,{})}}const rt=[];function ot(t,e=r){let n;const o=new Set;function s(e){if(c(t,e)&&(t=e,n)){const e=!rt.length;for(const e of o)e[1](),rt.push(e,t);if(e){for(let t=0;t<rt.length;t+=2)rt[t][0](rt[t+1]);rt.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(i,l=r){const c=[i,l];return o.add(c),1===o.size&&(n=e(s)||r),i(t),()=>{o.delete(c),0===o.size&&(n(),n=null)}}}}const st=ot(!1),it=ot([]),lt=ot([]);function ct(t){let e,n,r,o,s,i,c,u,a=t[0].num+"",g=(t[0].question||"No question set")+"",p=t[0].answer+"";return{c(){e=m("div"),n=x(a),r=x(": "),o=x(g),s=x(" ~ "),i=x(p),y(e,"class","jxword-question svelte-1trgq9y")},m(a,h){d(a,e,h),f(e,n),f(e,r),f(e,o),f(e,s),f(e,i),c||(u=w(e,"dblclick",(function(){l(t[1](t[0]))&&t[1](t[0]).apply(this,arguments)})),c=!0)},p(e,r){t=e,1&r&&a!==(a=t[0].num+"")&&q(n,a),1&r&&g!==(g=(t[0].question||"No question set")+"")&&q(o,g),1&r&&p!==(p=t[0].answer+"")&&q(i,p)},d(t){t&&h(e),c=!1,u()}}}function ut(t){let e,n,r,o,s,c,u,a,g,p,v,b,k,C=t[0].num+"";return{c(){e=m("div"),n=m("div"),r=m("span"),o=x(C),s=$(),c=m("input"),u=$(),a=m("div"),g=m("input"),p=$(),v=m("div"),v.textContent="Save",y(n,"class","jxword-question-number"),y(c,"type","text"),y(c,"class","jxword-question-text"),c.autofocus=!0,y(g,"type","text"),y(g,"class","jxword-question-text"),y(a,"class","jxword-question-answer"),y(v,"class","btn svelte-1trgq9y"),y(e,"class","jxword-question jxword-question-editing svelte-1trgq9y")},m(i,h){d(i,e,h),f(e,n),f(n,r),f(r,o),f(e,s),f(e,c),_(c,t[0].question),f(e,u),f(e,a),f(a,g),_(g,t[0].answer),f(e,p),f(e,v),c.focus(),b||(k=[w(c,"input",t[7]),w(c,"keydown",t[3]),w(g,"input",t[8]),w(v,"click",(function(){l(t[2](t[0]))&&t[2](t[0]).apply(this,arguments)}))],b=!0)},p(e,n){t=e,1&n&&C!==(C=t[0].num+"")&&q(o,C),1&n&&c.value!==t[0].question&&_(c,t[0].question),1&n&&g.value!==t[0].answer&&_(g,t[0].answer)},d(t){t&&h(e),b=!1,i(k)}}}function at(t){let e;function n(t,e){return t[0].editing?ut:ct}let o=n(t),s=o(t);return{c(){e=m("main"),s.c()},m(t,n){d(t,e,n),s.m(e,null)},p(t,[r]){o===(o=n(t))&&s?s.p(t,r):(s.d(1),s=o(t),s&&(s.c(),s.m(e,null)))},i:r,o:r,d(t){t&&h(e),s.d()}}}function ft(t,e,n){let{question:r}=e,{direction:o}=e;const s=E();let{questions_across:i=[]}=e,{questions_down:l=[]}=e;function c(t){"across"==o?it.set(i):lt.set(l),st.set(!1),t.editing=!1,s("save",{question:t,direction:o}),s("change")}return t.$$set=t=>{"question"in t&&n(0,r=t.question),"direction"in t&&n(4,o=t.direction),"questions_across"in t&&n(5,i=t.questions_across),"questions_down"in t&&n(6,l=t.questions_down)},[r,function(t){t.editing=!0,st.set(!0),"across"==o?it.set(i):lt.set(l)},c,function(t){"Enter"==t.key&&c(r)},o,i,l,function(){r.question=this.value,n(0,r)},function(){r.answer=this.value,n(0,r)}]}class dt extends Z{constructor(t){super(),Y(this,t,ft,at,c,{question:0,direction:4,questions_across:5,questions_down:6})}}function ht(t,e,n){const r=t.slice();return r[4]=e[n],r}function gt(t,e,n){const r=t.slice();return r[4]=e[n],r}function mt(t){let e,n;return e=new dt({props:{question:t[4],direction:"across",questions_across:t[0]}}),e.$on("change",t[2]),{c(){X(e.$$.fragment)},m(t,r){Q(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.question=t[4]),1&n&&(r.questions_across=t[0]),e.$set(r)},i(t){n||(J(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function pt(t){let e,n;return e=new dt({props:{question:t[4],direction:"down",questions_down:t[1]}}),e.$on("change",t[3]),{c(){X(e.$$.fragment)},m(t,r){Q(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.question=t[4]),2&n&&(r.questions_down=t[1]),e.$set(r)},i(t){n||(J(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function xt(t){let e,n,r,o,s,i,l,c,u,a,p=t[0],x=[];for(let e=0;e<p.length;e+=1)x[e]=mt(gt(t,p,e));const v=t=>G(x[t],1,1,(()=>{x[t]=null}));let w=t[1],b=[];for(let e=0;e<w.length;e+=1)b[e]=pt(ht(t,w,e));const q=t=>G(b[t],1,1,(()=>{b[t]=null}));return{c(){e=m("main"),n=m("div"),r=m("div"),o=m("h4"),o.textContent="Across",s=$();for(let t=0;t<x.length;t+=1)x[t].c();i=$(),l=m("div"),c=m("h4"),c.textContent="Down",u=$();for(let t=0;t<b.length;t+=1)b[t].c();y(r,"class","jxword-questions-direction jxword-questions-across svelte-1jm0aq5"),y(l,"class","jxword-questions-direction jxword-questions-across svelte-1jm0aq5"),y(n,"class","jxword-questions svelte-1jm0aq5"),y(e,"class","svelte-1jm0aq5")},m(t,h){d(t,e,h),f(e,n),f(n,r),f(r,o),f(r,s);for(let t=0;t<x.length;t+=1)x[t].m(r,null);f(n,i),f(n,l),f(l,c),f(l,u);for(let t=0;t<b.length;t+=1)b[t].m(l,null);a=!0},p(t,[e]){if(1&e){let n;for(p=t[0],n=0;n<p.length;n+=1){const o=gt(t,p,n);x[n]?(x[n].p(o,e),J(x[n],1)):(x[n]=mt(o),x[n].c(),J(x[n],1),x[n].m(r,null))}for(K(),n=p.length;n<x.length;n+=1)v(n);F()}if(2&e){let n;for(w=t[1],n=0;n<w.length;n+=1){const r=ht(t,w,n);b[n]?(b[n].p(r,e),J(b[n],1)):(b[n]=pt(r),b[n].c(),J(b[n],1),b[n].m(l,null))}for(K(),n=w.length;n<b.length;n+=1)q(n);F()}},i(t){if(!a){for(let t=0;t<p.length;t+=1)J(x[t]);for(let t=0;t<w.length;t+=1)J(b[t]);a=!0}},o(t){x=x.filter(Boolean);for(let t=0;t<x.length;t+=1)G(x[t]);b=b.filter(Boolean);for(let t=0;t<b.length;t+=1)G(b[t]);a=!1},d(t){t&&h(e),g(x,t),g(b,t)}}}function $t(t,e,n){let r=[],o=[];return it.subscribe((t=>{n(0,r=t)})),lt.subscribe((t=>{n(1,o=t)})),[r,o,function(e){A.call(this,t,e)},function(e){A.call(this,t,e)}]}class vt extends Z{constructor(t){super(),Y(this,t,$t,xt,c,{})}}function wt(t,e,n){const r=t.slice();return r[52]=e[n],r[54]=n,r}function yt(t,e,n){const r=t.slice();return r[55]=e[n],r[57]=n,r}function bt(t){let e,n,r,o,s,l,c,u,a,g=t[55]+"";return{c(){e=p("rect"),o=p("text"),s=x(g),y(e,"class","jxword-cell-rect svelte-1txnct7"),y(e,"role","cell"),y(e,"tabindex","-1"),y(e,"aria-label",""),y(e,"y",n=t[16]*t[54]+t[7]),y(e,"x",r=t[20]*t[57]+t[7]),y(e,"width",t[16]),y(e,"height",t[20]),y(e,"stroke",t[9]),y(e,"stroke-width",t[6]),y(e,"fill",t[11]),y(e,"data-col",t[57]),y(e,"data-row",t[54]),y(o,"id","jxword-letter-"+t[57]+"-"+t[54]),y(o,"x",l=t[16]*t[57]+t[7]+t[16]/2),y(o,"y",c=t[20]*t[54]+t[7]+t[20]-.1*t[20]),y(o,"text-anchor","middle"),y(o,"font-size",t[18]),y(o,"width",t[16]),y(o,"class","svelte-1txnct7")},m(t,n){d(t,e,n),d(t,o,n),f(o,s),u||(a=[w(e,"focus",Dt),w(o,"focus",Dt)],u=!0)},p(t,i){65664&i[0]&&n!==(n=t[16]*t[54]+t[7])&&y(e,"y",n),1048704&i[0]&&r!==(r=t[20]*t[57]+t[7])&&y(e,"x",r),65536&i[0]&&y(e,"width",t[16]),1048576&i[0]&&y(e,"height",t[20]),512&i[0]&&y(e,"stroke",t[9]),64&i[0]&&y(e,"stroke-width",t[6]),2048&i[0]&&y(e,"fill",t[11]),1&i[0]&&g!==(g=t[55]+"")&&q(s,g),65664&i[0]&&l!==(l=t[16]*t[57]+t[7]+t[16]/2)&&y(o,"x",l),1048704&i[0]&&c!==(c=t[20]*t[54]+t[7]+t[20]-.1*t[20])&&y(o,"y",c),262144&i[0]&&y(o,"font-size",t[18]),65536&i[0]&&y(o,"width",t[16])},d(t){t&&h(e),t&&h(o),u=!1,i(a)}}}function qt(t){let e,n,r,o,s;return{c(){e=p("rect"),y(e,"class","jxword-cell-rect svelte-1txnct7"),y(e,"role","cell"),y(e,"tabindex","-1"),y(e,"aria-label",""),y(e,"y",n=t[16]*t[54]+t[7]),y(e,"x",r=t[20]*t[57]+t[7]),y(e,"width",t[16]),y(e,"height",t[20]),y(e,"stroke",t[9]),y(e,"stroke-width",t[6]),y(e,"fill",t[10]),y(e,"data-col",t[54]),y(e,"data-row",t[57])},m(t,n){d(t,e,n),o||(s=w(e,"focus",Dt),o=!0)},p(t,o){65664&o[0]&&n!==(n=t[16]*t[54]+t[7])&&y(e,"y",n),1048704&o[0]&&r!==(r=t[20]*t[57]+t[7])&&y(e,"x",r),65536&o[0]&&y(e,"width",t[16]),1048576&o[0]&&y(e,"height",t[20]),512&o[0]&&y(e,"stroke",t[9]),64&o[0]&&y(e,"stroke-width",t[6]),1024&o[0]&&y(e,"fill",t[10])},d(t){t&&h(e),o=!1,s()}}}function _t(t){let e,n,r,o,s,i,l=t[15][t[54]][t[57]]+"";return{c(){e=p("text"),n=x(l),y(e,"x",r=t[16]*t[57]+t[7]+2),y(e,"y",o=t[20]*t[54]+t[7]+t[19]),y(e,"text-anchor","left"),y(e,"font-size",t[19]),y(e,"class","svelte-1txnct7")},m(t,r){d(t,e,r),f(e,n),s||(i=w(e,"focus",Dt),s=!0)},p(t,s){32768&s[0]&&l!==(l=t[15][t[54]][t[57]]+"")&&q(n,l),65664&s[0]&&r!==(r=t[16]*t[57]+t[7]+2)&&y(e,"x",r),1572992&s[0]&&o!==(o=t[20]*t[54]+t[7]+t[19])&&y(e,"y",o),524288&s[0]&&y(e,"font-size",t[19])},d(t){t&&h(e),s=!1,i()}}}function kt(t){let e,n,r,o;function s(t,e){return"#"==t[55]?qt:bt}let l=s(t),c=l(t),u=null!=t[15][t[54]][t[57]]&&_t(t);function a(){return t[39](t[57],t[54])}function g(){return t[40](t[57],t[54])}return{c(){var r,o,s,i;e=p("g"),c.c(),n=v(),u&&u.c(),y(e,"id","jxword-cell-"+t[57]+"-"+t[54]),y(e,"class","jxword-cell svelte-1txnct7"),r=e,o="z-index",null===(s="20")?r.style.removeProperty(o):r.style.setProperty(o,s,i?"important":""),k(e,"selected",t[2]===t[54]&&t[1]===t[57]),k(e,"active",t[17][t[54]][t[57]])},m(s,i){d(s,e,i),c.m(e,null),f(e,n),u&&u.m(e,null),r||(o=[w(e,"click",a),w(e,"dblclick",g),w(e,"keydown",t[14])],r=!0)},p(r,o){l===(l=s(t=r))&&c?c.p(t,o):(c.d(1),c=l(t),c&&(c.c(),c.m(e,n))),null!=t[15][t[54]][t[57]]?u?u.p(t,o):(u=_t(t),u.c(),u.m(e,null)):u&&(u.d(1),u=null),6&o[0]&&k(e,"selected",t[2]===t[54]&&t[1]===t[57]),131072&o[0]&&k(e,"active",t[17][t[54]][t[57]])},d(t){t&&h(e),c.d(),u&&u.d(),r=!1,i(o)}}}function Ct(t){let e,n=t[52],r=[];for(let e=0;e<n.length;e+=1)r[e]=kt(yt(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=v()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);d(t,e,n)},p(t,o){if(10481351&o[0]){let s;for(n=t[52],s=0;s<n.length;s+=1){const i=yt(t,n,s);r[s]?r[s].p(i,o):(r[s]=kt(i),r[s].c(),r[s].m(e.parentNode,e))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){g(r,t),t&&h(e)}}}function jt(t){let e,n,r,o,s,i,l,c,u,a,x=t[0],v=[];for(let e=0;e<x.length;e+=1)v[e]=Ct(wt(t,x,e));return l=new vt({}),l.$on("change",t[41]),{c(){e=m("main"),n=m("div"),r=p("svg"),o=p("g");for(let t=0;t<v.length;t+=1)v[t].c();s=p("rect"),i=$(),X(l.$$.fragment),y(s,"x",t[7]),y(s,"y",t[7]),y(s,"width",t[3]),y(s,"height",t[4]),y(s,"stroke",t[8]),y(s,"stroke-width",t[5]),y(s,"fill","none"),y(s,"class","svelte-1txnct7"),y(o,"class","cell-group svelte-1txnct7"),y(r,"class","jxword-svg svelte-1txnct7"),y(r,"min-x","0"),y(r,"min-y","0"),y(r,"width",t[21]),y(r,"height",t[22]),y(n,"class","jxword-svg-container svelte-1txnct7"),y(e,"class","svelte-1txnct7")},m(h,g){d(h,e,g),f(e,n),f(n,r),f(r,o);for(let t=0;t<v.length;t+=1)v[t].m(o,null);f(o,s),f(e,i),Q(l,e,null),c=!0,u||(a=w(e,"move",t[12]),u=!0)},p(t,e){if(10481351&e[0]){let n;for(x=t[0],n=0;n<x.length;n+=1){const r=wt(t,x,n);v[n]?v[n].p(r,e):(v[n]=Ct(r),v[n].c(),v[n].m(o,s))}for(;n<v.length;n+=1)v[n].d(1);v.length=x.length}(!c||128&e[0])&&y(s,"x",t[7]),(!c||128&e[0])&&y(s,"y",t[7]),(!c||8&e[0])&&y(s,"width",t[3]),(!c||16&e[0])&&y(s,"height",t[4]),(!c||256&e[0])&&y(s,"stroke",t[8]),(!c||32&e[0])&&y(s,"stroke-width",t[5]),(!c||2097152&e[0])&&y(r,"width",t[21]),(!c||4194304&e[0])&&y(r,"height",t[22])},i(t){c||(J(l.$$.fragment,t),c=!0)},o(t){G(l.$$.fragment,t),c=!1},d(t){t&&h(e),g(v,t),V(l),u=!1,a()}}}function Dt(t){}function Et(t,e,n){let r,o;u(t,lt,(t=>n(42,r=t))),u(t,it,(t=>n(43,o=t)));const s=E();let i,l,c,f,d,h,g=[],m=[],{size:p=10}=e,{current_x:x=0}=e,{current_y:$=0}=e,{grid:v=[]}=e,{current_direction:w="across"}=e,{totalWidth:y=500}=e,{totalHeight:b=500}=e,{outerBorderWidth:q=1.5}=e,{innerBorderWidth:_=1}=e,{margin:k=3}=e,{outerBorderColour:C="black"}=e,{innerBorderColour:j="black"}=e,{fillColour:D="black"}=e,{backgroundColour:z="white"}=e;function B(t,e){if("#"===v[e][t])return!1;if(t>=p)return!1;return!(R(t,e,"across").length<=1)&&(0===t||"#"==v[e][t-1])}function S(t,e){if("#"===v[e][t])return!1;if(e>=p)return!1;return!(R(t,e,"down").length<=1)&&(0===e||"#"==v[e-1][t])}function P(t,e,n,s,i){const l=R(e,n,s);if("across"===s){for(let e=0;e<o.length;e++){if(o[e].answer===l&&o[e].direction===s)return{...o[e],answer:l,num:t};if(o[e].num===t&&o[e].direction===s)return{...o[e],answer:l}}return{num:t,x:e,y:n,question:i,answer:l,editing:!1,direction:s}}for(let e=0;e<r.length;e++){if(r[e].answer===l&&r[e].direction===s)return{...r[e],answer:l,num:t};if(r[e].num===t&&r[e].direction===s)return a(lt,r[e]={...r[e],answer:l},r)}return a(lt,r={num:t,x:e,y:n,question:i,answer:l,editing:!1,direction:s},r)}function R(t,e,n){let r=function(t,e,n){if("across"===n)for(;t>0&&"#"!==v[e][t-1];)t--;else for(;e>0&&"#"!==v[e-1][t];)e--;return{x:t,y:e}}(t,e,n),o=function(t,e,n){if("across"===n)for(;t<p-1&&"#"!==v[e][t+1];)t++;else for(;e<p-1&&"#"!==v[e+1][t];)e++;return{x:t,y:e}}(t,e,n),s="";if("across"===n)for(let t=r.x;t<=o.x;t++)s+=v[e][t]||" ";else for(let e=r.y;e<=o.y;e++)s+=v[e][t]||" ";return s}function T(){if(n(17,m=Array(p).fill(!1).map((()=>Array(p).fill(!1)))),"across"===w){for(let t=x;t<p&&"#"!==v[$][t];t++)n(17,m[$][t]=!0,m);for(let t=x;t>=0&&"#"!==v[$][t];t--)n(17,m[$][t]=!0,m)}else{for(let t=$;t<p&&"#"!==v[t][x];t++)n(17,m[t][x]=!0,m);for(let t=$;t>=0&&"#"!==v[t][x];t--)n(17,m[t][x]=!0,m)}}function O(){$>0&&(n(2,$--,$),s("change"),T())}function W(){$<p-1&&(n(2,$++,$),s("change"),T())}function N(){x>0&&(n(1,x--,x),s("change"),T())}function M(){x<p-1&&(n(1,x++,x),s("change"),T())}function L(){n(25,w="across"===w?"down":"across"),s("change"),T()}function H(t,e){n(1,x=t),n(2,$=e),s("change"),T()}function U(t,e){L()}return t.$$set=t=>{"size"in t&&n(24,p=t.size),"current_x"in t&&n(1,x=t.current_x),"current_y"in t&&n(2,$=t.current_y),"grid"in t&&n(0,v=t.grid),"current_direction"in t&&n(25,w=t.current_direction),"totalWidth"in t&&n(3,y=t.totalWidth),"totalHeight"in t&&n(4,b=t.totalHeight),"outerBorderWidth"in t&&n(5,q=t.outerBorderWidth),"innerBorderWidth"in t&&n(6,_=t.innerBorderWidth),"margin"in t&&n(7,k=t.margin),"outerBorderColour"in t&&n(8,C=t.outerBorderColour),"innerBorderColour"in t&&n(9,j=t.innerBorderColour),"fillColour"in t&&n(10,D=t.fillColour),"backgroundColour"in t&&n(11,z=t.backgroundColour)},t.$$.update=()=>{if(16875705&t.$$.dirty[0]){p<2&&n(24,p=2),p>30&&n(24,p=30),n(21,d=y+k+q),n(22,h=b+k+q),n(16,c=y/p),n(20,f=b/p),n(18,i=.7*c),n(19,l=.33*c);let t=[],e=[],r=1;if(v.length-1<p)for(let t=0;t<p;t++)n(0,v[t]=v[t]||Array(p).map((()=>" ")),v),n(15,g[t]=g[t]||Array(p).map((()=>" ")),g);for(;v.length>p;){for(let t=0;t<v.length;t++)for(;v[t].length>p;)v[t].pop(),g[t].pop();v.pop(),g.pop()}for(let o=0;o<p;o++){g[o]||n(15,g[o]=Array(p),g);for(let s=0;s<p;s++){if(n(0,v[o][s]=v[o][s]||" ",v),"#"===v[o][s])continue;let i=!1;B(s,o)&&(t.push(P(r,s,o,"across","")),i=!0),S(s,o)&&(e.push(P(r,s,o,"down","")),i=!0),n(15,g[o][s]=i?r++:null,g)}}t.sort(),e.sort(),it.set(t),lt.set(e),T()}},[v,x,$,y,b,q,_,k,C,j,D,z,function(t){"up"===t&&O(),"down"===t&&W(),"left"===t&&N(),"right"===t&&M(),"backsapce"===t&&backspace()},H,function(t){const e=t.keyCode;t.metaKey||(e>64&&e<91?s("letter",t.key.toUpperCase()):51===e?s("letter","#"):8===e?(t.preventDefault(),s("backspace")):32==e?(t.preventDefault(),s("move","next")):9===e?(t.preventDefault(),t.shiftKey?s("move","prev-word"):s("move","next-word")):13===e?s("enter"):37===e?(t.preventDefault(),s("move","left")):38===e?(t.preventDefault(),s("move","up")):39===e?(t.preventDefault(),s("move","right")):40===e&&(t.preventDefault(),s("move","down")))},g,c,m,i,l,f,d,h,U,p,w,.7,.33,function(t){n(1,x=t.srcElement.getAttribute("data-col")),n(2,$=t.srcElement.getAttribute("data-row")),T(),s("change")},O,W,N,M,function(){n(1,x=0),s("change"),T()},function(){n(1,x=p-1),s("change"),T()},L,function(t){n(25,w="across"===t?"across":"down"),s("change"),T()},function(){return w},function(){return{x,y:$}},(t,e)=>{H(t,e)},(t,e)=>{U()},function(e){A.call(this,t,e)}]}class At extends Z{constructor(t){super(),Y(this,t,Et,jt,c,{size:24,current_x:1,current_y:2,grid:0,current_direction:25,totalWidth:3,totalHeight:4,outerBorderWidth:5,innerBorderWidth:6,margin:7,outerBorderColour:8,innerBorderColour:9,fillColour:10,backgroundColour:11,fontRatio:26,numRatio:27,selectCell:28,moveUp:29,moveDown:30,moveLeft:31,moveRight:32,moveStartOfRow:33,moveEndOfRow:34,handleMove:12,toggleDir:35,setDir:36,getDir:37,getCurrentPos:38,setCurrentPos:13,handleKeydown:14},null,[-1,-1])}get fontRatio(){return this.$$.ctx[26]}get numRatio(){return this.$$.ctx[27]}get selectCell(){return this.$$.ctx[28]}get moveUp(){return this.$$.ctx[29]}get moveDown(){return this.$$.ctx[30]}get moveLeft(){return this.$$.ctx[31]}get moveRight(){return this.$$.ctx[32]}get moveStartOfRow(){return this.$$.ctx[33]}get moveEndOfRow(){return this.$$.ctx[34]}get handleMove(){return this.$$.ctx[12]}get toggleDir(){return this.$$.ctx[35]}get setDir(){return this.$$.ctx[36]}get getDir(){return this.$$.ctx[37]}get getCurrentPos(){return this.$$.ctx[38]}get setCurrentPos(){return this.$$.ctx[13]}get handleKeydown(){return this.$$.ctx[14]}}function zt(t){let e;return{c(){e=m("main"),e.innerHTML='<p>Use &quot;#&quot; to create a blank square.</p> \n    <p>Double-click the question on the right to set an answer.</p> \n    <p>Hint: Complete the words before starting on the answers, because you might have to change something!</p> \n    <p>Note: This Crossword Creator is in Alpha. <a href="https://github.com/j-norwood-young/jxword-creator/issues">Please report bugs here</a>.</p>'},m(t,n){d(t,e,n)},p:r,i:r,o:r,d(t){t&&h(e)}}}class Bt extends Z{constructor(t){super(),Y(this,t,null,zt,c,{})}}function St(){localStorage.clear()}function Pt(t){let e="";var n;t.title&&(e+=`Title: ${t.title}\n`),t.author&&(e+=`Author: ${t.author}\n`),t.editor&&(e+=`Editor: ${t.editor}\n`),t.date&&(e+=`Date: ${n=t.date,new Date(n).toISOString().slice(0,10)}\n`),e+="\n\n";for(let n=0;n<t.grid.length;n++){for(let r=0;r<t.grid[n].length;r++)e+=`${t.grid[n][r]}`;e+="\n"}e+="\n\n";for(let n of t.questions_across)e+=`A${n.num}. ${n.question} ~ ${n.answer}\n`;e+="\n";for(let n of t.questions_down)e+=`D${n.num}. ${n.question} ~ ${n.answer}\n`;return e}var Rt=function(t){function e(t){let e=[];const n=t.split("\n").filter((t=>t&&"\n"!==t)),r=/(^.\d*)\.\s(.*)\s~\s(.*)/;for(let t=0;t<n.length;t++){if(!n[t].trim())continue;const o=n[t].match(r);if(4!==o.length)throw`Could not parse question ${n[t]}`;const s=o[2].replace(/\\/g,"");e[t]={num:o[1],question:s,answer:o[3]}}return e}return function(t){let n=t.split(/^$^$/gm).filter((t=>"\n"!==t));if(n.length>4){n=t.split(/\r\n\r\n/g).filter((t=>t.trim()));for(let t=0;t<n.length;t++)n[t]=n[t].replace(/\r\n/g,"\n")}if(4!==n.length)throw`Too many parts - expected 4, found ${n.length}`;const r=n[0],o=n[1],s=n[2],i=n[3],l=function(t){const e=t.split("\n").filter((t=>t&&"\n"!==t));let n={};return e.forEach((t=>{const e=t.split(": ");n[e[0]]=e[1]})),n}(r),c=function(t){let e=[];const n=t.split("\n").filter((t=>t&&"\n"!==t));for(let t=0;t<n.length;t++)e[t]=n[t].split("");return e}(o);return{meta:l,grid:c,across:e(s),down:e(i),rawGrid:o,rawAcross:s,rawDown:i,rawMeta:r}}(t)};function Tt(t){let e,n,r,o,s,l,c,u,a,g,p,x,v,q,k,C,j,D,E,A,z,B,S,P,R,T,O,W,N,M,L,H,U,I,K,F,Y,Z;n=new Bt({}),L=new nt({}),L.$on("reset",t[14]);let tt={size:t[7],grid:t[1]};return U=new At({props:tt}),t[23](U),U.$on("change",t[13]),U.$on("move",t[9]),U.$on("letter",t[10]),U.$on("backspace",t[12]),U.$on("enter",t[11]),{c(){e=m("main"),X(n.$$.fragment),r=$(),o=m("div"),s=m("label"),s.textContent="Upload an XD file (optional)",l=$(),c=m("input"),u=$(),a=m("label"),a.textContent="Title",g=$(),p=m("input"),x=$(),v=m("label"),v.textContent="Author",q=$(),k=m("input"),C=$(),j=m("label"),j.textContent="Editor",D=$(),E=m("input"),A=$(),z=m("label"),z.textContent="Date",B=$(),S=m("input"),P=$(),R=m("label"),R.textContent="Size",T=$(),O=m("input"),W=$(),N=m("div"),M=m("div"),X(L.$$.fragment),H=$(),X(U.$$.fragment),I=$(),K=m("textarea"),y(s,"for","file"),y(s,"class","svelte-1mhgt02"),y(c,"class","drop_zone svelte-1mhgt02"),y(c,"type","file"),y(c,"id","file"),y(c,"name","files"),y(c,"accept",".xd"),y(a,"for","title"),y(a,"class","svelte-1mhgt02"),y(p,"id","title"),y(p,"name","title"),y(p,"type","text"),y(p,"class","svelte-1mhgt02"),y(v,"for","author"),y(v,"class","svelte-1mhgt02"),y(k,"id","author"),y(k,"name","author"),y(k,"type","text"),y(k,"class","svelte-1mhgt02"),y(j,"for","editor"),y(j,"class","svelte-1mhgt02"),y(E,"id","editor"),y(E,"name","editor"),y(E,"type","text"),y(E,"class","svelte-1mhgt02"),y(z,"for","date"),y(z,"class","svelte-1mhgt02"),y(S,"id","date"),y(S,"name","date"),y(S,"type","date"),y(S,"class","svelte-1mhgt02"),y(R,"for","size"),y(R,"class","svelte-1mhgt02"),y(O,"type","number"),y(O,"name","size"),y(O,"id","size"),y(O,"placeholder","size"),y(O,"default","5"),y(O,"min","2"),y(O,"class","svelte-1mhgt02"),y(M,"class","jxword-header"),y(N,"class","jxword-container svelte-1mhgt02"),y(K,"id","xd"),y(K,"name","xd"),y(K,"class","jxword-xd-textarea svelte-1mhgt02"),y(o,"class","jxword-form-container svelte-1mhgt02"),y(e,"class","svelte-1mhgt02")},m(i,h){d(i,e,h),Q(n,e,null),f(e,r),f(e,o),f(o,s),f(o,l),f(o,c),t[17](c),f(o,u),f(o,a),f(o,g),f(o,p),_(p,t[3]),f(o,x),f(o,v),f(o,q),f(o,k),_(k,t[4]),f(o,C),f(o,j),f(o,D),f(o,E),_(E,t[5]),f(o,A),f(o,z),f(o,B),f(o,S),_(S,t[6]),f(o,P),f(o,R),f(o,T),f(o,O),_(O,t[7]),f(o,W),f(o,N),f(N,M),Q(L,M,null),f(N,H),Q(U,N,null),f(o,I),f(o,K),_(K,t[0]),F=!0,Y||(Z=[w(c,"change",t[15]),w(p,"input",t[18]),w(p,"change",t[13]),w(k,"input",t[19]),w(k,"change",t[13]),w(E,"input",t[20]),w(E,"change",t[13]),w(S,"input",t[21]),w(S,"change",t[13]),w(O,"input",t[22]),w(K,"input",t[24])],Y=!0)},p(t,[e]){8&e&&p.value!==t[3]&&_(p,t[3]),16&e&&k.value!==t[4]&&_(k,t[4]),32&e&&E.value!==t[5]&&_(E,t[5]),64&e&&_(S,t[6]),128&e&&b(O.value)!==t[7]&&_(O,t[7]);const n={};128&e&&(n.size=t[7]),2&e&&(n.grid=t[1]),U.$set(n),1&e&&_(K,t[0])},i(t){F||(J(n.$$.fragment,t),J(L.$$.fragment,t),J(U.$$.fragment,t),F=!0)},o(t){G(n.$$.fragment,t),G(L.$$.fragment,t),G(U.$$.fragment,t),F=!1},d(r){r&&h(e),V(n),t[17](null),V(L),t[23](null),V(U),Y=!1,i(Z)}}}function Ot(t,e,n){let r,o,s,i,l,c,f;u(t,lt,(t=>n(26,r=t))),u(t,it,(t=>n(27,o=t)));let{xd:d}=e,{grid:h=[...Array(10)].map((t=>Array(10)))}=e,g=h.length,m={grid:h,size:g,current_x:0,current_y:0,direction:"across",questions_across:o,questions_down:r},p=()=>{let{x:t,y:e}=s.getCurrentPos(),n=s.getDir();return{grid:h,size:g,current_x:t,current_y:e,direction:n,questions_across:o,questions_down:r,title:i,author:l,editor:c,date:f}};function x(){!function(t){let e=JSON.stringify(t);localStorage.setItem("jxword-creator",e)}(p()),n(0,d=Pt(p()))}var $;async function v(t){const e=Rt(t);console.log(e),n(1,h=e.grid),n(7,g=e.grid.length),n(4,l=e.meta.Author),n(5,c=e.meta.Editor),n(6,f=e.meta.Date),n(3,i=e.meta.Title),s.setDir("across"),s.setCurrentPos(0,0),await(O(),R);let u=o;for(let t of u){let n=e.across.find((e=>e.num===`A${t.num}`));n&&(t.question=n.question)}it.set(u);let a=r;for(let t of a){let n=e.down.find((e=>e.num===`D${t.num}`));n&&(t.question=n.question)}lt.set(a),x()}let w;return $=()=>{d?v(d):(m=function(){let t=localStorage.getItem("jxword-creator");return t?JSON.parse(t):null}()||m,n(1,h=m.grid),n(7,g=m.size),n(4,l=m.author),n(5,c=m.editor),n(6,f=m.date),n(3,i=m.title),it.set(m.questions_across),lt.set(m.questions_down),s.setDir(m.direction),s.setCurrentPos(m.current_x,m.current_y))},D().$$.on_mount.push($),t.$$set=t=>{"xd"in t&&n(0,d=t.xd),"grid"in t&&n(1,h=t.grid)},[d,h,s,i,l,c,f,g,w,function(t){const e=t.detail;let n;"down"!==e&&"up"!==e||(n="down"),"left"!==e&&"right"!==e||(n="across"),n!==s.getDir()?s.setDir(n):s.handleMove(e)},function(t){const e=t.detail;let{x:r,y:o}=s.getCurrentPos();n(1,h[o][r]=e,h),"across"===s.getDir()?s.moveRight():s.moveDown()},function(t){let e,{x:n,y:i}=s.getCurrentPos(),l=s.getDir(),c="across"===l?o:r;"across"===l?(e=c.find((t=>i===t.y&&n>=t.x&&n<=t.x+t.answer.length-1)),e&&(e.editing=!0,a(it,o=c,o))):(e=c.find((t=>n===t.x&&i>=t.y&&i<=t.y+t.answer.length-1)),e&&(e.editing=!0,a(lt,r=c,r)))},function(t){let{x:e,y:r}=s.getCurrentPos();n(1,h[r][e]="",h),"across"===s.getDir()?s.moveLeft():s.moveUp()},x,function(){St(),n(7,g=10),s.setDir("across"),s.setCurrentPos(0,0),n(3,i=""),n(4,l=""),n(5,c=""),n(6,f=""),n(1,h=[...Array(10)].map((t=>Array(10)))),it.set([]),St(),lt.set([]),St(),n(0,d=""),St()},function(){const t=new FileReader;t.onload=(w.files[0],async function(t){try{await v(t.target.result)}catch(t){throw console.error(t),"Unable to parse file"}}),t.readAsText(w.files[0])},!0,function(t){B[t?"unshift":"push"]((()=>{w=t,n(8,w)}))},function(){i=this.value,n(3,i)},function(){l=this.value,n(4,l)},function(){c=this.value,n(5,c)},function(){f=this.value,n(6,f)},function(){g=b(this.value),n(7,g)},function(t){B[t?"unshift":"push"]((()=>{s=t,n(2,s)}))},function(){d=this.value,n(0,d)}]}class Wt extends Z{constructor(t){super(),Y(this,t,Ot,Tt,c,{save_state:16,xd:0,grid:1})}get save_state(){return this.$$.ctx[16]}}t.exports=function(t,e){return new Wt({target:t,props:e})}},869:(t,e,n)=>{"use strict";n.r(e)}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,n),s.exports}n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{const t=n(765);n(869);const e=document.getElementById("crosswordengine-creator-container"),r={save_state:!1};"undefined"!=typeof xd&&(r.xd=xd),t(e,r)})()})();